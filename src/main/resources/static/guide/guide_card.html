<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>행정구역 카드형식 페이지네이션</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }
        .filter-container {
            display: flex;
            margin-bottom: 20px;
            gap: 10px;
        }
        .filter-container select, .filter-container input {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }
        .card-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            max-width: 900px;
            margin: 20px 0;
        }
        .card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .card:hover {
            transform: scale(1.05);
        }
        .card img {
            width: 100%;
            border-radius: 8px;
            height: auto;
        }
        .card h3 {
            margin: 10px 0;
            font-size: 20px;
        }
        .card p {
            margin: 5px 0;
        }
        .rating {
            color: gold;
            font-size: 18px;
        }
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }
        .pagination button {
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            margin: 0 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .pagination button:hover {
            background-color: #0056b3;
        }
        .pagination button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>

<div class="filter-container">
    <select id="citySelect" onchange="updateCountyDistricts()">
        <option value="">시 선택</option>
    </select>
    
    <select id="countySelect" onchange="updateDistricts()">
        <option value="">군 선택</option>
    </select>

    <select id="districtSelect">
        <option value="">구 선택</option>
    </select>
    
    <input type="text" id="searchInput" placeholder="검색어 입력">
    <button onclick="search()">조회</button>
</div>

<div class="card-container" id="cardContainer"></div>
<div class="pagination" id="pagination"></div>

<script>
    const totalCards = 100; // 총 카드 수 (예시)
    const cardsPerPage = 9; // 페이지당 카드 수
    let currentPage = 1;
    let currentSearch = '';
    
    const cardContainer = document.getElementById('cardContainer');
    const pagination = document.getElementById('pagination');

    async function loadCities() {
        const response = await fetch('https://sgisapi.kostat.go.kr/OpenAPI3/addr/stage.json?accessToken=YOUR_ACCESS_TOKEN&cd=non');
        const data = await response.json();
        
        const cities = data.result.map(item => ({
            code: item.sido_cd,
            name: item.sido_nm
        }));

        const citySelect = document.getElementById('citySelect');
        cities.forEach(city => {
            const option = document.createElement('option');
            option.value = city.code;
            option.innerText = city.name;
            citySelect.appendChild(option);
        });
    }

    async function updateCountyDistricts() {
        const citySelect = document.getElementById('citySelect');
        const countySelect = document.getElementById('countySelect');
        const districtSelect = document.getElementById('districtSelect');

        const selectedCity = citySelect.value;
        countySelect.innerHTML = '<option value="">군 선택</option>';
        districtSelect.innerHTML = '<option value="">구 선택</option>';

        if (selectedCity) {
            const response = await fetch(`https://sgisapi.kostat.go.kr/OpenAPI3/addr/stage.json?accessToken=YOUR_ACCESS_TOKEN&cd=${selectedCity}`);
            const data = await response.json();

            const counties = data.result.map(item => ({
                code: item.gun_cd,
                name: item.gun_nm
            }));

            counties.forEach(county => {
                const option = document.createElement('option');
                option.value = county.code;
                option.innerText = county.name;
                countySelect.appendChild(option);
            });
        }
    }

    async function updateDistricts() {
        const countySelect = document.getElementById('countySelect');
        const districtSelect = document.getElementById('districtSelect');

        const selectedCounty = countySelect.value;
        districtSelect.innerHTML = '<option value="">구 선택</option>';

        if (selectedCounty) {
            const response = await fetch(`https://sgisapi.kostat.go.kr/OpenAPI3/addr/stage.json?accessToken=YOUR_ACCESS_TOKEN&cd=${selectedCounty}`);
            const data = await response.json();

            const districts = data.result.map(item => ({
                code: item.dong_cd,
                name: item.dong_nm
            }));

            districts.forEach(district => {
                const option = document.createElement('option');
                option.value = district.code;
                option.innerText = district.name;
                districtSelect.appendChild(option);
            });
        }
    }

    function displayCards(page) {
        cardContainer.innerHTML = '';
        const start = (page - 1) * cardsPerPage;
        const end = start + cardsPerPage;

        for (let i = start; i < end && i < totalCards; i++) {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="https://via.placeholder.com/150" alt="이미지">
                <h3>카드 ${i + 1}</h3>
                <p>지역: 지역 ${i + 1}</p>
                <p>수용 인원: ${Math.floor(Math.random() * 100)}</p>
                <p>금액: ${Math.floor(Math.random() * 10000)} 원</p>
                <p class="rating">평점: ${Math.random() * 5.0}</p>
                <p>닉네임: 사용자${i + 1}</p>
            `;
            cardContainer.appendChild(card);
        }
    }

    function setupPagination() {
        pagination.innerHTML = '';
        const totalPages = Math.ceil(totalCards / cardsPerPage);
        
        if (currentPage > 1) {
            const firstButton = document.createElement('button');
            firstButton.innerText = '<< 처음';
            firstButton.onclick = () => goToPage(1);
            pagination.appendChild(firstButton);
        }

        if (currentPage > 10) {
            const prevTenButton = document.createElement('button');
            prevTenButton.innerText = '< 이전 10페이지';
            prevTenButton.onclick = () => goToPage(currentPage - 10);
            pagination.appendChild(prevTenButton);
        }

        const startPage = Math.floor((currentPage - 1) / 10) * 10 + 1;
        const endPage = Math.min(startPage + 9, totalPages);

        for (let i = startPage; i <= endPage; i++) {
            const button = document.createElement('button');
            button.innerText = i;
            button.onclick = () => goToPage(i);
            if (i === currentPage) {
                button.disabled = true;
            }
            pagination.appendChild(button);
        }

        if (currentPage + 10 <= totalPages) {
            const nextTenButton = document.createElement('button');
            nextTenButton.innerText = '다음 10페이지 >';
            nextTenButton.onclick = () => goToPage(currentPage + 10);
            pagination.appendChild(nextTenButton);
        }

        if (currentPage < totalPages) {
            const lastButton = document.createElement('button');
            lastButton.innerText = '끝 >>';
            lastButton.onclick = () => goToPage(totalPages);
            pagination.appendChild(lastButton);
        }
    }

    function goToPage(page) {
        currentPage = page;
        displayCards(currentPage);
        setupPagination();
    }

    function search() {
        currentSearch = document.getElementById('searchInput').value;
        currentPage = 1;
        displayCards(currentPage);
        setupPagination();
        // 검색 로직 추가 가능
    }

    // 초기 로드
    loadCities();
    displayCards(currentPage);
    setupPagination();
</script>

</body>
</html>
